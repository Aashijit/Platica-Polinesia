{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"42.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\nimport { StarProviderComponent } from './../../components/star-provider/star-provider';\nimport { RoundProgressModule } from 'angular-svg-round-progressbar';\nimport { ProjectModuleComponent } from './../../components/project-module/project-module';\nimport { UserInfoComponent } from './../../components/user-info/user-info';\nimport { NgModule,CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  declarations: [\n    HomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HomePage),\n    RoundProgressModule,\n    ComponentsModule\n  ],\n})\nexport class HomePageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { AlertController } from 'ionic-angular';\nimport { MessageHelper } from './../../providers/message-helper';\nimport { DataValidation } from './../../Utils/DataValidation';\nimport { Codes } from './../../Utils/Codes';\nimport { HttpProvider } from './../../providers/data/data';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Grid } from 'ionic-angular';\nimport { ModalController } from 'ionic-angular';\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html',\n})\nexport class HomePage {\n\n  loadingStatus: any = 'Getting the list of users';\n  userList: any = null;\n  userMenus : any=  null;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public modalCtrl: ModalController,\n    public httpCall: HttpProvider, public codes: Codes, public dataValidation: DataValidation,\n    public msgHelper: MessageHelper, public alertController: AlertController) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad HomePage');\n\n    //Start calling the API's\n    //Get user list\n\n    var requestJson = {\n      'AppType': 'W'\n    };\n\n    this.httpCall.callApi(requestJson, this.codes.API_GET_USER_DETAILS).then(responseJson => {\n\n      //Validate\n      if (this.dataValidation.isEmptyJson(responseJson)) {\n        this.msgHelper.showErrorDialog('Error !!', 'Empty response received from server !!!');\n        return;\n      }\n\n      this.userList = responseJson['resultData'];\n\n      //Get the user mapped list\n      this.httpCall.callApi(requestJson, this.codes.API_GET_USER_MAP_LIST).then(getUserMappedListJson => {\n\n        //Validate\n        if (this.dataValidation.isEmptyJson(getUserMappedListJson)) {\n          this.msgHelper.showErrorDialog('Error !!', 'Empty response received from server in Get User Map List API !!!');\n          return;\n        }\n\n        //Store the user map list\n        localStorage.setItem(this.codes.LSK_USER_MAP_LIST,JSON.stringify(responseJson['resultData']));\n\n\n        if (!this.dataValidation.isEmptyJson(getUserMappedListJson['resultData'])) {\n\n          var listOfMappings = getUserMappedListJson['resultData'];\n\n          //Fetch the list of group ids\n          this.httpCall.callApi(requestJson, this.codes.API_GET_USER_GROUP).then(usergroupjson => {\n\n            if (this.dataValidation.isEmptyJson(usergroupjson)) {\n              this.msgHelper.showErrorDialog('Error !!', 'Empty response received from server in Get User Group List API !!!');\n              return;\n            }\n            var userGroups = usergroupjson['resultData'];\n            console.error(userGroups);\n            for (let i = 0; i <= this.userList.length - 1; i++) {\n              this.userList[i]['UserTypeName'] = this.getUserTypeName(listOfMappings, this.userList[i]['UserId']);\n              this.userList[i]['GroupName'] = this.getUserGroupId(listOfMappings, this.userList[i]['UserId'], userGroups);\n            }\n          });\n        }\n      });\n    });\n\n\n    //Get user permission using user type id\n    var currentUserInfo = JSON.parse(localStorage.getItem(this.codes.LSK_USER_INFORMATION_JSON));\n\n    console.error(JSON.stringify(currentUserInfo));\n\n    if (this.dataValidation.isEmptyJson(currentUserInfo)) {\n      this.msgHelper.showToast('Could not fetch user id');\n      return;\n    }\n\n    var permissionRequestJson = {\n      \"AppType\": \"W\",\n      \"UserTypeId\": currentUserInfo[0]['UserTypeIds']\n    }\n\n    this.httpCall.callApi(permissionRequestJson,this.codes.API_GET_PERMISSION_INFORMATION).then(responseJson => {\n      if (this.dataValidation.isEmptyJson(responseJson)) {\n        this.msgHelper.showErrorDialog('Error !!', 'Empty response received from server in Get Permission Information API !!!');\n        return;\n      }\n      this.userMenus = responseJson['resultData'];\n      // console.error(\"Menus \"+this.userMenus);\n      localStorage.setItem(this.codes.LSK_PERMISSION_MENU,JSON.stringify(this.userMenus));\n    });\n  }\n\n\n  getUserGroupId(resultData, userId, userGroup) {\n    for (let i = 0; i <= resultData.length - 1; i++) {\n      if (resultData[i]['UserId'] == userId) {\n        for (let j = 0; j < userGroup.length; j++) {\n          // alert(userGroup[j]['GroupId']+' '+ resultData[i]['UserGroupIds']);\n          if (userGroup[j]['UserGroupId'] == resultData[i]['UserGroupIds']) {\n            return userGroup[j]['UserGroupName'];\n          }\n        }\n      }\n    }\n    return null;\n  }\n\n  getUserTypeName(resultData, userId) {\n    for (let i = 0; i <= resultData.length - 1; i++) {\n      if (resultData[i]['UserId'] == userId) {\n        return resultData[i]['UserTypeName'];\n      }\n    }\n    return null;\n  }\n\n  goToUserMessages() {\n    let userModal = this.modalCtrl.create('UserMessageNotificationListPage');\n    userModal.present();\n  }\n\n\n  goToProjectSelection() {\n    let projectSelectionModal = this.modalCtrl.create('ProjectInformationPage');\n    projectSelectionModal.present();\n  }\n\n  editUser(user) {\n    let userModal = this.modalCtrl.create('UpdateUserPage', { 'userinfo': user });\n    userModal.present();\n  }\n\n\n  deleteUser(user) {\n    const alert = this.alertController.create({\n      title: 'User to be deleted',\n      message: 'User is to be deleted. <strong>Are you sure</strong>!!!',\n      buttons: [\n        {\n          text: 'No',\n          role: 'no',\n          handler: () => {\n\n          }\n        }, {\n          text: 'Yes',\n          handler: () => {\n\n            //Call the delete user API\n            var requestJson = {\n              \"UserId\": user['UserId'],\n              \"AppType\": \"W\"\n            };\n\n            var loading = this.msgHelper.showWorkingDialog('Deleting the user ...');\n\n            this.httpCall.callApi(requestJson, this.codes.API_DELETE_USER).then(responseJson => {\n\n              loading.dismiss();\n\n              if (this.dataValidation.isEmptyJson(responseJson)) {\n                this.msgHelper.showErrorDialog('Error !!', 'Empty response received from server  !!!');\n                return;\n              }\n\n              if (responseJson['status'] == 1) {\n                this.msgHelper.showToast('User deleted !!!');\n                this.ionViewDidLoad();\n              }\n\n            });\n\n          }\n        }\n      ]\n    });\n\n    alert.present();\n\n  }\n\n\n  addUser() {\n    let userModal = this.modalCtrl.create('AddUserPage');\n    userModal.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}