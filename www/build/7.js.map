{"version":3,"sources":["../../src/pages/leave-selection/leave-selection.module.ts","../../src/pages/leave-selection/leave-selection.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\r\nimport { RoundProgressModule } from 'angular-svg-round-progressbar';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { LeaveSelectionPage } from './leave-selection';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LeaveSelectionPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(LeaveSelectionPage),\r\n    RoundProgressModule,\r\n    ComponentsModule,\r\n  ],\r\n})\r\nexport class LeaveSelectionPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/leave-selection/leave-selection.module.ts","import { DataValidation } from './../../Utils/DataValidation';\r\nimport { Codes } from './../../Utils/Codes';\r\nimport { MessageHelper } from './../../providers/message-helper';\r\nimport { HttpProvider } from './../../providers/data/data';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController, AlertController } from 'ionic-angular';\r\nimport {\r\n  CalendarModal,\r\n  CalendarModalOptions,\r\n  DayConfig,\r\n  CalendarResult\r\n} from 'ion2-calendar';\r\nimport { DatePipe } from '@angular/common';\r\nimport { p } from '@angular/core/src/render3';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-leave-selection',\r\n  templateUrl: 'leave-selection.html',\r\n})\r\nexport class LeaveSelectionPage {\r\n\r\n  leaves : any = null;\r\n  appliedLeaves : any = null;\r\n  rejectedLeaves : any = null;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,public modalCtrl: ModalController,\r\n    public http: HttpProvider, public msgHelper : MessageHelper,public codes : Codes, public dataValidation  : DataValidation,\r\n    public datePipe : DatePipe, public alert  : AlertController) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad LeaveSelectionPage');\r\n\r\n    //Fetch the leave types\r\n    var requestJson ={\r\n      \"AppType\": \"W\"\r\n    };\r\n    \r\n    this.http.callApi(requestJson,this.codes.API_GET_LEAVE_TYPE).then(responseJson => {\r\n\r\n      if(this.dataValidation.isEmptyJson(responseJson)){\r\n        this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Leave Type API');\r\n        return;\r\n      }\r\n\r\n      if(this.dataValidation.isEmptyJson(responseJson['resultData'])){\r\n        this.msgHelper.showErrorDialog('Error !!!',responseJson['resMessage']);\r\n        return;\r\n      }\r\n      \r\n      this.leaves = responseJson['resultData'];\r\n    });\r\n\r\n    var currentUserInfo = JSON.parse(localStorage.getItem(this.codes.LSK_USER_INFORMATION_JSON));\r\n\r\n\r\n    if(this.dataValidation.isEmptyJson(currentUserInfo)){\r\n      this.msgHelper.showToast('Could not fetch user id');\r\n      return;\r\n    }\r\n\r\n    //Call the get leave information\r\n\r\n    //Get the current year\r\n\r\n\r\n    var reqJson = {\r\n      \"UserId\":currentUserInfo[0]['UserId'],\r\n      \"YearValue\": String(new Date().getFullYear()), \r\n      \"LeaveStatus\": \"A\",\r\n      \"AppType\": \"W\"\r\n    };\r\n\r\n    this.http.callApi(reqJson,this.codes.API_GET_USER_LEAVE_BALANCE_INFORMATION).then(responseJson => {\r\n      \r\n      if(this.dataValidation.isEmptyJson(responseJson)){\r\n        this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Leave Type API');\r\n        return;\r\n      }\r\n\r\n      if(this.dataValidation.isEmptyJson(responseJson['resultData'])){\r\n        this.msgHelper.showErrorDialog('Error !!!',responseJson['resMessage']);\r\n        return;\r\n      }\r\n\r\n      this.appliedLeaves = responseJson['resultData'];\r\n\r\n      // for(let i=0;i<this.appliedLeaves.length;i++){\r\n\r\n      //   if(this.dataValidation.isEmptyJson(this.appliedLeaves[i]['ApprovedOrRejectedBy'])){\r\n      //     continue;\r\n      //   }\r\n\r\n      //   //Call the user information for each of the user ids\r\n      //   var reqJsonUser = {\r\n      //       \"UserId\": this.appliedLeaves[i]['ApprovedOrRejectedBy'],\r\n      //       \"AppType\": \"W\"\r\n      //   };\r\n\r\n      //   this.http.callApi(reqJsonUser,this.codes.API_GET_PARTICULAR_USER_INFORMATION).then(resJson => {\r\n      //     if(this.dataValidation.isEmptyJson(resJson)){\r\n      //       this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Particular User Information API');\r\n      //       return;\r\n      //     }\r\n    \r\n      //     if(this.dataValidation.isEmptyJson(resJson['resultData'])){\r\n      //       this.msgHelper.showErrorDialog('Error !!!',resJson['resMessage']);\r\n      //       return;\r\n      //     }\r\n\r\n      //     console.error(resJson['resultData']);\r\n      //     this.appliedLeaves[i]['ApprovedByUser'] = resJson['resultData'][0]['FirstName']+\" \"+resJson['resultData'][0]['LastName'];\r\n      //   });\r\n      // }\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//Rejected\r\n    var reqJson = {\r\n      \"UserId\":currentUserInfo[0]['UserId'],\r\n      \"YearValue\": String(new Date().getFullYear()), \r\n      \"LeaveStatus\": \"R\",\r\n      \"AppType\": \"W\"\r\n    };\r\n\r\n    this.http.callApi(reqJson,this.codes.API_GET_USER_LEAVE_BALANCE_INFORMATION).then(responseJson => {\r\n      \r\n      if(this.dataValidation.isEmptyJson(responseJson)){\r\n        this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Leave Type API');\r\n        return;\r\n      }\r\n\r\n      if(this.dataValidation.isEmptyJson(responseJson['resultData'])){\r\n        this.msgHelper.showErrorDialog('Error !!!',responseJson['resMessage']);\r\n        return;\r\n      }\r\n\r\n      this.rejectedLeaves = responseJson['resultData'];\r\n\r\n      // for(let i=0;i<this.rejectedLeaves.length;i++){\r\n\r\n      //   if(this.dataValidation.isEmptyJson(this.rejectedLeaves[i]['ApprovedOrRejectedBy'])){\r\n      //     continue;\r\n      //   }\r\n\r\n      //   //Call the user information for each of the user ids\r\n      //   var reqJsonUser = {\r\n      //       \"UserId\": this.rejectedLeaves[i]['ApprovedOrRejectedBy'],\r\n      //       \"AppType\": \"W\"\r\n      //   };\r\n\r\n      //   this.http.callApi(reqJsonUser,this.codes.API_GET_PARTICULAR_USER_INFORMATION).then(resJson => {\r\n      //     if(this.dataValidation.isEmptyJson(resJson)){\r\n      //       this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Particular User Information API');\r\n      //       return;\r\n      //     }\r\n    \r\n      //     if(this.dataValidation.isEmptyJson(resJson['resultData'])){\r\n      //       this.msgHelper.showErrorDialog('Error !!!',resJson['resMessage']);\r\n      //       return;\r\n      //     }\r\n\r\n      //     console.error(resJson['resultData']);\r\n      //     this.rejectedLeaves[i]['ApprovedByUser'] = resJson['resultData'][0]['FirstName']+\" \"+resJson['resultData'][0]['LastName'];\r\n      //   });\r\n      // }\r\n    });\r\n  }\r\n\r\n  getInformation(leaveTypeId,leave){\r\n    var currentUserInfo = JSON.parse(localStorage.getItem(this.codes.LSK_USER_INFORMATION_JSON));\r\n\r\n    if(this.dataValidation.isEmptyJson(currentUserInfo)){\r\n      this.msgHelper.showToast('Could not fetch user id');\r\n      return;\r\n    }\r\n\r\n    var requestJson= {\r\n      \"UserId\": currentUserInfo[0]['UserId'],\r\n      \"LeaveTypeId\": leaveTypeId,\r\n      \"YearValue\": String(new Date().getFullYear()),\r\n      \"AppType\": \"W\"\r\n    };\r\n\r\n    this.http.callApi(requestJson,this.codes.API_GET_LEAVE_INFORMATION_COUNT).then(responseJson => {\r\n\r\n      if(this.dataValidation.isEmptyJson(responseJson)){\r\n        this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Leave Type API');\r\n        return;\r\n      }\r\n\r\n      if(this.dataValidation.isEmptyJson(responseJson['resultData'])){\r\n        this.msgHelper.showErrorDialog('Error !!!',responseJson['resMessage']);\r\n        return;\r\n      }\r\n      \r\n      leave['TakenLeave'] = responseJson['resultData'][0]['TakenLeave'];\r\n      leave['RemaningLeave'] = responseJson['resultData'][0]['RemaningLeave'];\r\n    });\r\n\r\n\r\n  }\r\n\r\n  goToUserMessages(){\r\n    let userModal = this.modalCtrl.create('UserMessageNotificationListPage');\r\n    userModal.present();\r\n  }\r\n\r\n\r\n  openCalendar(leave) {\r\n    const options: CalendarModalOptions = {\r\n      pickMode: 'range',\r\n      title: 'Select Leave Dates',\r\n      color : 'dark'\r\n    };\r\n\r\n    let myCalendar = this.modalCtrl.create(CalendarModal, {\r\n      options: options\r\n    });\r\n\r\n    myCalendar.present();\r\n\r\n    myCalendar.onDidDismiss((date: { from: CalendarResult; to: CalendarResult }, type: string) => {\r\n      console.log(date.from['time']);\r\n\r\n      //Show an alert if the person wants to really apply\r\n\r\n      //Check if the user will be able to apply for the leave\r\n      //Calculate the difference\r\n\r\n\r\n      var differenceInDays = (date.to['time'] - date.from['time']) / (1000 * 60 * 60 * 24);\r\n\r\n      if(this.dataValidation.isEmptyJson(leave['RemaningLeave'])){\r\n        this.getInformation(leave['LeaveTypeId'],leave);\r\n        this.msgHelper.showToast('Please select the dates again !!!',false);\r\n        return;\r\n      }\r\n\r\n      if(differenceInDays > Number(leave['RemaningLeave'])){\r\n        this.msgHelper.showToast('You have only '+leave['RemaningLeave']+' '+ leave['LeaveTypeName']+' leaves left !!!',false);\r\n        return;\r\n      }\r\n\r\n      var currentUserInfo = JSON.parse(localStorage.getItem(this.codes.LSK_USER_INFORMATION_JSON));\r\n        \r\n      if(this.dataValidation.isEmptyJson(currentUserInfo)){\r\n       this.msgHelper.showToast('Could not fetch user id');\r\n       return;\r\n      }\r\n        \r\n      var requestJson = {\r\n        \"UserId\": currentUserInfo[0]['UserId'],\r\n        \"LeaveTypeId\": leave['LeaveTypeId'],\r\n        \"FinancialYearId\": 1,\r\n        \"LeaveTakeCount\": differenceInDays,\r\n        \"LeaveApplyDate\": this.datePipe.transform(new Date(),'YYYY-MM-DD'),\r\n        \"LeaveFromDate\": date.from['string'],\r\n        \"LeaveToDate\": date.to['string'],\r\n        \"AppType\": \"W\"\r\n      };\r\n\r\n      let applyModal = this.modalCtrl.create('LeaveApplyPage',{\"RequestJson\":requestJson});\r\n      applyModal.present();\r\n      \r\n    });\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/leave-selection/leave-selection.ts"],"sourceRoot":""}