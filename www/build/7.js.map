{"version":3,"sources":["../../src/pages/leave-selection/leave-selection.module.ts","../../src/pages/leave-selection/leave-selection.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { ComponentsModule } from './../../components/components.module';\nimport { RoundProgressModule } from 'angular-svg-round-progressbar';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LeaveSelectionPage } from './leave-selection';\n\n@NgModule({\n  declarations: [\n    LeaveSelectionPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LeaveSelectionPage),\n    RoundProgressModule,\n    ComponentsModule,\n  ],\n})\nexport class LeaveSelectionPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/leave-selection/leave-selection.module.ts","import { DataValidation } from './../../Utils/DataValidation';\nimport { Codes } from './../../Utils/Codes';\nimport { MessageHelper } from './../../providers/message-helper';\nimport { HttpProvider } from './../../providers/data/data';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, AlertController } from 'ionic-angular';\nimport {\n  CalendarModal,\n  CalendarModalOptions,\n  DayConfig,\n  CalendarResult\n} from 'ion2-calendar';\nimport { DatePipe } from '@angular/common';\nimport { p } from '@angular/core/src/render3';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-leave-selection',\n  templateUrl: 'leave-selection.html',\n})\nexport class LeaveSelectionPage {\n\n  leaves : any = null;\n  appliedLeaves : any = null;\n  rejectedLeaves : any = null;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,public modalCtrl: ModalController,\n    public http: HttpProvider, public msgHelper : MessageHelper,public codes : Codes, public dataValidation  : DataValidation,\n    public datePipe : DatePipe, public alert  : AlertController) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LeaveSelectionPage');\n\n    //Fetch the leave types\n    var requestJson ={\n      \"AppType\": \"W\"\n    };\n    \n    this.http.callApi(requestJson,this.codes.API_GET_LEAVE_TYPE).then(responseJson => {\n\n      if(this.dataValidation.isEmptyJson(responseJson)){\n        this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Leave Type API');\n        return;\n      }\n\n      if(this.dataValidation.isEmptyJson(responseJson['resultData'])){\n        this.msgHelper.showErrorDialog('Error !!!',responseJson['resMessage']);\n        return;\n      }\n      \n      this.leaves = responseJson['resultData'];\n    });\n\n    var currentUserInfo = JSON.parse(localStorage.getItem(this.codes.LSK_USER_INFORMATION_JSON));\n\n\n    if(this.dataValidation.isEmptyJson(currentUserInfo)){\n      this.msgHelper.showToast('Could not fetch user id');\n      return;\n    }\n\n    //Call the get leave information\n\n    //Get the current year\n\n\n    var reqJson = {\n      \"UserId\":currentUserInfo[0]['UserId'],\n      \"YearValue\": String(new Date().getFullYear()), \n      \"LeaveStatus\": \"A\",\n      \"AppType\": \"W\"\n    };\n\n    this.http.callApi(reqJson,this.codes.API_GET_USER_LEAVE_BALANCE_INFORMATION).then(responseJson => {\n      \n      if(this.dataValidation.isEmptyJson(responseJson)){\n        this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Leave Type API');\n        return;\n      }\n\n      if(this.dataValidation.isEmptyJson(responseJson['resultData'])){\n        this.msgHelper.showErrorDialog('Error !!!',responseJson['resMessage']);\n        return;\n      }\n\n      this.appliedLeaves = responseJson['resultData'];\n\n      // for(let i=0;i<this.appliedLeaves.length;i++){\n\n      //   if(this.dataValidation.isEmptyJson(this.appliedLeaves[i]['ApprovedOrRejectedBy'])){\n      //     continue;\n      //   }\n\n      //   //Call the user information for each of the user ids\n      //   var reqJsonUser = {\n      //       \"UserId\": this.appliedLeaves[i]['ApprovedOrRejectedBy'],\n      //       \"AppType\": \"W\"\n      //   };\n\n      //   this.http.callApi(reqJsonUser,this.codes.API_GET_PARTICULAR_USER_INFORMATION).then(resJson => {\n      //     if(this.dataValidation.isEmptyJson(resJson)){\n      //       this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Particular User Information API');\n      //       return;\n      //     }\n    \n      //     if(this.dataValidation.isEmptyJson(resJson['resultData'])){\n      //       this.msgHelper.showErrorDialog('Error !!!',resJson['resMessage']);\n      //       return;\n      //     }\n\n      //     console.error(resJson['resultData']);\n      //     this.appliedLeaves[i]['ApprovedByUser'] = resJson['resultData'][0]['FirstName']+\" \"+resJson['resultData'][0]['LastName'];\n      //   });\n      // }\n    });\n\n\n\n\n\n\n\n//Rejected\n    var reqJson = {\n      \"UserId\":currentUserInfo[0]['UserId'],\n      \"YearValue\": String(new Date().getFullYear()), \n      \"LeaveStatus\": \"R\",\n      \"AppType\": \"W\"\n    };\n\n    this.http.callApi(reqJson,this.codes.API_GET_USER_LEAVE_BALANCE_INFORMATION).then(responseJson => {\n      \n      if(this.dataValidation.isEmptyJson(responseJson)){\n        this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Leave Type API');\n        return;\n      }\n\n      if(this.dataValidation.isEmptyJson(responseJson['resultData'])){\n        this.msgHelper.showErrorDialog('Error !!!',responseJson['resMessage']);\n        return;\n      }\n\n      this.rejectedLeaves = responseJson['resultData'];\n\n      // for(let i=0;i<this.rejectedLeaves.length;i++){\n\n      //   if(this.dataValidation.isEmptyJson(this.rejectedLeaves[i]['ApprovedOrRejectedBy'])){\n      //     continue;\n      //   }\n\n      //   //Call the user information for each of the user ids\n      //   var reqJsonUser = {\n      //       \"UserId\": this.rejectedLeaves[i]['ApprovedOrRejectedBy'],\n      //       \"AppType\": \"W\"\n      //   };\n\n      //   this.http.callApi(reqJsonUser,this.codes.API_GET_PARTICULAR_USER_INFORMATION).then(resJson => {\n      //     if(this.dataValidation.isEmptyJson(resJson)){\n      //       this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Particular User Information API');\n      //       return;\n      //     }\n    \n      //     if(this.dataValidation.isEmptyJson(resJson['resultData'])){\n      //       this.msgHelper.showErrorDialog('Error !!!',resJson['resMessage']);\n      //       return;\n      //     }\n\n      //     console.error(resJson['resultData']);\n      //     this.rejectedLeaves[i]['ApprovedByUser'] = resJson['resultData'][0]['FirstName']+\" \"+resJson['resultData'][0]['LastName'];\n      //   });\n      // }\n    });\n  }\n\n  getInformation(leaveTypeId,leave){\n    var currentUserInfo = JSON.parse(localStorage.getItem(this.codes.LSK_USER_INFORMATION_JSON));\n\n    if(this.dataValidation.isEmptyJson(currentUserInfo)){\n      this.msgHelper.showToast('Could not fetch user id');\n      return;\n    }\n\n    var requestJson= {\n      \"UserId\": currentUserInfo[0]['UserId'],\n      \"LeaveTypeId\": leaveTypeId,\n      \"YearValue\": String(new Date().getFullYear()),\n      \"AppType\": \"W\"\n    };\n\n    this.http.callApi(requestJson,this.codes.API_GET_LEAVE_INFORMATION_COUNT).then(responseJson => {\n\n      if(this.dataValidation.isEmptyJson(responseJson)){\n        this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Leave Type API');\n        return;\n      }\n\n      if(this.dataValidation.isEmptyJson(responseJson['resultData'])){\n        this.msgHelper.showErrorDialog('Error !!!',responseJson['resMessage']);\n        return;\n      }\n      \n      leave['TakenLeave'] = responseJson['resultData'][0]['TakenLeave'];\n      leave['RemaningLeave'] = responseJson['resultData'][0]['RemaningLeave'];\n    });\n\n\n  }\n\n  goToUserMessages(){\n    let userModal = this.modalCtrl.create('UserMessageNotificationListPage');\n    userModal.present();\n  }\n\n\n  openCalendar(leave) {\n    const options: CalendarModalOptions = {\n      pickMode: 'range',\n      title: 'Select Leave Dates',\n      color : 'dark'\n    };\n\n    let myCalendar = this.modalCtrl.create(CalendarModal, {\n      options: options\n    });\n\n    myCalendar.present();\n\n    myCalendar.onDidDismiss((date: { from: CalendarResult; to: CalendarResult }, type: string) => {\n      console.log(date.from['time']);\n\n      //Show an alert if the person wants to really apply\n\n      //Check if the user will be able to apply for the leave\n      //Calculate the difference\n\n\n      var differenceInDays = (date.to['time'] - date.from['time']) / (1000 * 60 * 60 * 24);\n\n      if(this.dataValidation.isEmptyJson(leave['RemaningLeave'])){\n        this.getInformation(leave['LeaveTypeId'],leave);\n        this.msgHelper.showToast('Please select the dates again !!!',false);\n        return;\n      }\n\n      if(differenceInDays > Number(leave['RemaningLeave'])){\n        this.msgHelper.showToast('You have only '+leave['RemaningLeave']+' '+ leave['LeaveTypeName']+' leaves left !!!',false);\n        return;\n      }\n\n\n      const alt = this.alert.create({\n        title: 'Apply Leave',\n        message: 'Do you really want to apply leave from <strong>'+this.datePipe.transform(date.from[\"string\"],'d-MMM yyyy')+'</strong> to <strong>'+this.datePipe.transform(date.to[\"string\"],'d-MMM yyyy')+'</strong> ?',\n        buttons: [\n          {\n            text: 'No',\n            role: 'no',\n            handler: () => {\n              \n            }\n          }, {\n            text: 'Yes',\n            handler: () => {\n\n\n            var currentUserInfo = JSON.parse(localStorage.getItem(this.codes.LSK_USER_INFORMATION_JSON));\n        \n        \n            if(this.dataValidation.isEmptyJson(currentUserInfo)){\n              this.msgHelper.showToast('Could not fetch user id');\n              return;\n            }\n        \n              //Apply for leaves\n              var requestJson = {\n                  \"UserId\": currentUserInfo[0]['UserId'],\n                  \"LeaveTypeId\": leave['LeaveTypeId'],\n                  \"FinancialYearId\": 1,\n                  \"LeaveTakeCount\": differenceInDays,\n                  \"LeaveApplyDate\": this.datePipe.transform(new Date(),'YYYY-MM-DD'),\n                  \"LeaveFromDate\": date.from['string'],\n                  \"LeaveToDate\": date.to['string'],\n                  \"AppType\": \"W\"\n              };\n        \n              console.error(requestJson);\n        \n              this.http.callApi(requestJson,this.codes.API_LEAVE_APPLY).then(responseJson=>{\n        \n                if(this.dataValidation.isEmptyJson(responseJson)){\n                  this.msgHelper.showErrorDialog('Error !!!','Empty response received from Get Leave Type API');\n                  return;\n                }\n                \n                this.msgHelper.showToast(responseJson['resMessage'],false);\n        \n                this.ionViewDidLoad();\n              });\n            }\n          }\n        ]\n      });\n       alt.present();\n    });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/leave-selection/leave-selection.ts"],"sourceRoot":""}